(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["squooshCore"] = factory();
	else
		root["squooshCore"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./codecs/imagequant/imagequant.js":
/*!*****************************************!*\
  !*** ./codecs/imagequant/imagequant.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Module = function () {\n  // var _scriptDir = import.meta.url;\n  var _scriptDir = '';\n  return function (Module) {\n    Module = Module || {};\n    var e;\n    e || (e = typeof Module !== 'undefined' ? Module : {});\n    var aa, r;\n    e.ready = new Promise(function (a, b) {\n      aa = a;\n      r = b;\n    });\n    var t = {},\n        u;\n\n    for (u in e) e.hasOwnProperty(u) && (t[u] = e[u]);\n\n    var v = '',\n        ba;\n    v = self.location.href;\n    _scriptDir && (v = _scriptDir);\n    0 !== v.indexOf('blob:') ? v = v.substr(0, v.lastIndexOf('/') + 1) : v = '';\n\n    ba = function (a) {\n      var b = new XMLHttpRequest();\n      b.open('GET', a, !1);\n      b.responseType = 'arraybuffer';\n      b.send(null);\n      return new Uint8Array(b.response);\n    };\n\n    var ca = e.print || console.log.bind(console),\n        w = e.printErr || console.warn.bind(console);\n\n    for (u in t) t.hasOwnProperty(u) && (e[u] = t[u]);\n\n    t = null;\n    var y;\n    e.wasmBinary && (y = e.wasmBinary);\n    var noExitRuntime;\n    e.noExitRuntime && (noExitRuntime = e.noExitRuntime);\n    'object' !== typeof WebAssembly && z('no native wasm support detected');\n    var A,\n        da = !1,\n        ea = new TextDecoder('utf8');\n\n    function fa(a, b, c) {\n      var d = B;\n\n      if (0 < c) {\n        c = b + c - 1;\n\n        for (var f = 0; f < a.length; ++f) {\n          var g = a.charCodeAt(f);\n\n          if (55296 <= g && 57343 >= g) {\n            var l = a.charCodeAt(++f);\n            g = 65536 + ((g & 1023) << 10) | l & 1023;\n          }\n\n          if (127 >= g) {\n            if (b >= c) break;\n            d[b++] = g;\n          } else {\n            if (2047 >= g) {\n              if (b + 1 >= c) break;\n              d[b++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (b + 2 >= c) break;\n                d[b++] = 224 | g >> 12;\n              } else {\n                if (b + 3 >= c) break;\n                d[b++] = 240 | g >> 18;\n                d[b++] = 128 | g >> 12 & 63;\n              }\n\n              d[b++] = 128 | g >> 6 & 63;\n            }\n\n            d[b++] = 128 | g & 63;\n          }\n        }\n\n        d[b] = 0;\n      }\n    }\n\n    var ha = new TextDecoder('utf-16le');\n\n    function ia(a, b) {\n      var c = a >> 1;\n\n      for (b = c + b / 2; !(c >= b) && D[c];) ++c;\n\n      return ha.decode(B.subarray(a, c << 1));\n    }\n\n    function ja(a, b, c) {\n      void 0 === c && (c = 2147483647);\n      if (2 > c) return 0;\n      c -= 2;\n      var d = b;\n      c = c < 2 * a.length ? c / 2 : a.length;\n\n      for (var f = 0; f < c; ++f) E[b >> 1] = a.charCodeAt(f), b += 2;\n\n      E[b >> 1] = 0;\n      return b - d;\n    }\n\n    function ka(a) {\n      return 2 * a.length;\n    }\n\n    function la(a, b) {\n      for (var c = 0, d = ''; !(c >= b / 4);) {\n        var f = F[a + 4 * c >> 2];\n        if (0 == f) break;\n        ++c;\n        65536 <= f ? (f -= 65536, d += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023)) : d += String.fromCharCode(f);\n      }\n\n      return d;\n    }\n\n    function ma(a, b, c) {\n      void 0 === c && (c = 2147483647);\n      if (4 > c) return 0;\n      var d = b;\n      c = d + c - 4;\n\n      for (var f = 0; f < a.length; ++f) {\n        var g = a.charCodeAt(f);\n\n        if (55296 <= g && 57343 >= g) {\n          var l = a.charCodeAt(++f);\n          g = 65536 + ((g & 1023) << 10) | l & 1023;\n        }\n\n        F[b >> 2] = g;\n        b += 4;\n        if (b + 4 > c) break;\n      }\n\n      F[b >> 2] = 0;\n      return b - d;\n    }\n\n    function na(a) {\n      for (var b = 0, c = 0; c < a.length; ++c) {\n        var d = a.charCodeAt(c);\n        55296 <= d && 57343 >= d && ++c;\n        b += 4;\n      }\n\n      return b;\n    }\n\n    var G, oa, B, E, D, F, H, pa, qa;\n\n    function ra(a) {\n      G = a;\n      e.HEAP8 = oa = new Int8Array(a);\n      e.HEAP16 = E = new Int16Array(a);\n      e.HEAP32 = F = new Int32Array(a);\n      e.HEAPU8 = B = new Uint8Array(a);\n      e.HEAPU16 = D = new Uint16Array(a);\n      e.HEAPU32 = H = new Uint32Array(a);\n      e.HEAPF32 = pa = new Float32Array(a);\n      e.HEAPF64 = qa = new Float64Array(a);\n    }\n\n    var sa = e.INITIAL_MEMORY || 16777216;\n    e.wasmMemory ? A = e.wasmMemory : A = new WebAssembly.Memory({\n      initial: sa / 65536,\n      maximum: 32768\n    });\n    A && (G = A.buffer);\n    sa = G.byteLength;\n    ra(G);\n    var J,\n        ta = [],\n        ua = [],\n        va = [],\n        wa = [];\n\n    function xa() {\n      var a = e.preRun.shift();\n      ta.unshift(a);\n    }\n\n    var K = 0,\n        ya = null,\n        L = null;\n    e.preloadedImages = {};\n    e.preloadedAudios = {};\n\n    function z(a) {\n      if (e.onAbort) e.onAbort(a);\n      w(a);\n      da = !0;\n      a = new WebAssembly.RuntimeError('abort(' + a + '). Build with -s ASSERTIONS=1 for more info.');\n      r(a);\n      throw a;\n    }\n\n    function za() {\n      var a = N;\n      return String.prototype.startsWith ? a.startsWith('data:application/octet-stream;base64,') : 0 === a.indexOf('data:application/octet-stream;base64,');\n    }\n\n    var N = 'imagequant.wasm';\n\n    if (!za()) {\n      var Aa = N;\n      N = e.locateFile ? e.locateFile(Aa, v) : v + Aa;\n    }\n\n    function Ba() {\n      try {\n        if (y) return new Uint8Array(y);\n        if (ba) return ba(N);\n        throw 'both async and sync fetching of the wasm failed';\n      } catch (a) {\n        z(a);\n      }\n    }\n\n    function Ca() {\n      return y || 'function' !== typeof fetch ? Promise.resolve().then(Ba) : fetch(N, {\n        credentials: 'same-origin'\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + N + \"'\";\n        return a.arrayBuffer();\n      }).catch(function () {\n        return Ba();\n      });\n    }\n\n    function O(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if ('function' == typeof b) b(e);else {\n          var c = b.J;\n          'number' === typeof c ? void 0 === b.G ? J.get(c)() : J.get(c)(b.G) : c(void 0 === b.G ? null : b.G);\n        }\n      }\n    }\n\n    function Da(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError('Unknown type size: ' + a);\n      }\n    }\n\n    var Ea = void 0;\n\n    function P(a) {\n      for (var b = ''; B[a];) b += Ea[B[a++]];\n\n      return b;\n    }\n\n    var Q = {},\n        R = {},\n        S = {};\n\n    function Fa(a) {\n      if (void 0 === a) return '_unknown';\n      a = a.replace(/[^a-zA-Z0-9_]/g, '$');\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? '_' + a : a;\n    }\n\n    function Ga(a, b) {\n      a = Fa(a);\n      return new Function('body', 'return function ' + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function Ha(a) {\n      var b = Error,\n          c = Ga(a, function (d) {\n        this.name = a;\n        this.message = d;\n        d = Error(d).stack;\n        void 0 !== d && (this.stack = this.toString() + '\\n' + d.replace(/^Error(:[^\\n]*)?\\n/, ''));\n      });\n      c.prototype = Object.create(b.prototype);\n      c.prototype.constructor = c;\n\n      c.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + ': ' + this.message;\n      };\n\n      return c;\n    }\n\n    var Ia = void 0;\n\n    function T(a) {\n      throw new Ia(a);\n    }\n\n    var Ja = void 0;\n\n    function Ka(a, b) {\n      function c(h) {\n        h = b(h);\n        if (h.length !== d.length) throw new Ja('Mismatched type converter count');\n\n        for (var p = 0; p < d.length; ++p) U(d[p], h[p]);\n      }\n\n      var d = [];\n      d.forEach(function (h) {\n        S[h] = a;\n      });\n      var f = Array(a.length),\n          g = [],\n          l = 0;\n      a.forEach(function (h, p) {\n        R.hasOwnProperty(h) ? f[p] = R[h] : (g.push(h), Q.hasOwnProperty(h) || (Q[h] = []), Q[h].push(function () {\n          f[p] = R[h];\n          ++l;\n          l === g.length && c(f);\n        }));\n      });\n      0 === g.length && c(f);\n    }\n\n    function U(a, b, c) {\n      c = c || {};\n      if (!('argPackAdvance' in b)) throw new TypeError('registerType registeredInstance requires argPackAdvance');\n      var d = b.name;\n      a || T('type \"' + d + '\" must have a positive integer typeid pointer');\n\n      if (R.hasOwnProperty(a)) {\n        if (c.K) return;\n        T(\"Cannot register type '\" + d + \"' twice\");\n      }\n\n      R[a] = b;\n      delete S[a];\n      Q.hasOwnProperty(a) && (b = Q[a], delete Q[a], b.forEach(function (f) {\n        f();\n      }));\n    }\n\n    var Na = [],\n        V = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function Oa(a) {\n      4 < a && 0 === --V[a].H && (V[a] = void 0, Na.push(a));\n    }\n\n    function W(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = Na.length ? Na.pop() : V.length;\n          V[b] = {\n            H: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function Pa(a) {\n      return this.fromWireType(H[a >> 2]);\n    }\n\n    function Qa(a) {\n      if (null === a) return 'null';\n      var b = typeof a;\n      return 'object' === b || 'array' === b || 'function' === b ? a.toString() : '' + a;\n    }\n\n    function Ra(a, b) {\n      switch (b) {\n        case 2:\n          return function (c) {\n            return this.fromWireType(pa[c >> 2]);\n          };\n\n        case 3:\n          return function (c) {\n            return this.fromWireType(qa[c >> 3]);\n          };\n\n        default:\n          throw new TypeError('Unknown float type: ' + a);\n      }\n    }\n\n    function Sa(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError('new_ called with constructor type ' + typeof b + ' which is not a function');\n      var c = Ga(b.name || 'unknownFunctionName', function () {});\n      c.prototype = b.prototype;\n      c = new c();\n      a = b.apply(c, a);\n      return a instanceof Object ? a : c;\n    }\n\n    function Ta(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function Ua(a, b) {\n      var c = e;\n\n      if (void 0 === c[a].D) {\n        var d = c[a];\n\n        c[a] = function () {\n          c[a].D.hasOwnProperty(arguments.length) || T(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + ') - expects one of (' + c[a].D + ')!');\n          return c[a].D[arguments.length].apply(this, arguments);\n        };\n\n        c[a].D = [];\n        c[a].D[d.I] = d;\n      }\n    }\n\n    function Va(a, b, c) {\n      e.hasOwnProperty(a) ? ((void 0 === c || void 0 !== e[a].D && void 0 !== e[a].D[c]) && T(\"Cannot register public name '\" + a + \"' twice\"), Ua(a, a), e.hasOwnProperty(c) && T('Cannot register multiple overloads of a function with the same number of arguments (' + c + ')!'), e[a].D[c] = b) : (e[a] = b, void 0 !== c && (e[a].M = c));\n    }\n\n    function Wa(a, b) {\n      for (var c = [], d = 0; d < a; d++) c.push(F[(b >> 2) + d]);\n\n      return c;\n    }\n\n    function Xa(a, b) {\n      0 <= a.indexOf('j') || z('Assertion failed: getDynCaller should only be called with i64 sigs');\n      var c = [];\n      return function () {\n        c.length = arguments.length;\n\n        for (var d = 0; d < arguments.length; d++) c[d] = arguments[d];\n\n        var f;\n        -1 != a.indexOf('j') ? f = c && c.length ? e['dynCall_' + a].apply(null, [b].concat(c)) : e['dynCall_' + a].call(null, b) : f = J.get(b).apply(null, c);\n        return f;\n      };\n    }\n\n    function Ya(a, b) {\n      a = P(a);\n      var c = -1 != a.indexOf('j') ? Xa(a, b) : J.get(b);\n      'function' !== typeof c && T('unknown function pointer with signature ' + a + ': ' + b);\n      return c;\n    }\n\n    var Za = void 0;\n\n    function $a(a) {\n      a = ab(a);\n      var b = P(a);\n      X(a);\n      return b;\n    }\n\n    function bb(a, b) {\n      function c(g) {\n        f[g] || R[g] || (S[g] ? S[g].forEach(c) : (d.push(g), f[g] = !0));\n      }\n\n      var d = [],\n          f = {};\n      b.forEach(c);\n      throw new Za(a + ': ' + d.map($a).join([', ']));\n    }\n\n    function cb(a, b, c) {\n      switch (b) {\n        case 0:\n          return c ? function (d) {\n            return oa[d];\n          } : function (d) {\n            return B[d];\n          };\n\n        case 1:\n          return c ? function (d) {\n            return E[d >> 1];\n          } : function (d) {\n            return D[d >> 1];\n          };\n\n        case 2:\n          return c ? function (d) {\n            return F[d >> 2];\n          } : function (d) {\n            return H[d >> 2];\n          };\n\n        default:\n          throw new TypeError('Unknown integer type: ' + a);\n      }\n    }\n\n    var db = {};\n\n    function eb() {\n      return 'object' === typeof globalThis ? globalThis : Function('return this')();\n    }\n\n    function fb(a, b) {\n      var c = R[a];\n      void 0 === c && T(b + ' has unknown type ' + $a(a));\n      return c;\n    }\n\n    for (var gb = {}, hb = [null, [], []], ib = Array(256), Y = 0; 256 > Y; ++Y) ib[Y] = String.fromCharCode(Y);\n\n    Ea = ib;\n    Ia = e.BindingError = Ha('BindingError');\n    Ja = e.InternalError = Ha('InternalError');\n\n    e.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < V.length; ++b) void 0 !== V[b] && ++a;\n\n      return a;\n    };\n\n    e.get_first_emval = function () {\n      for (var a = 5; a < V.length; ++a) if (void 0 !== V[a]) return V[a];\n\n      return null;\n    };\n\n    Za = e.UnboundTypeError = Ha('UnboundTypeError');\n    ua.push({\n      J: function () {\n        jb();\n      }\n    });\n    var lb = {\n      o: function () {},\n      p: function (a, b, c, d, f) {\n        var g = Da(c);\n        b = P(b);\n        U(a, {\n          name: b,\n          fromWireType: function (l) {\n            return !!l;\n          },\n          toWireType: function (l, h) {\n            return h ? d : f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function (l) {\n            if (1 === c) var h = oa;else if (2 === c) h = E;else if (4 === c) h = F;else throw new TypeError('Unknown boolean type size: ' + b);\n            return this.fromWireType(h[l >> g]);\n          },\n          F: null\n        });\n      },\n      v: function (a, b) {\n        b = P(b);\n        U(a, {\n          name: b,\n          fromWireType: function (c) {\n            var d = V[c].value;\n            Oa(c);\n            return d;\n          },\n          toWireType: function (c, d) {\n            return W(d);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Pa,\n          F: null\n        });\n      },\n      m: function (a, b, c) {\n        c = Da(c);\n        b = P(b);\n        U(a, {\n          name: b,\n          fromWireType: function (d) {\n            return d;\n          },\n          toWireType: function (d, f) {\n            if ('number' !== typeof f && 'boolean' !== typeof f) throw new TypeError('Cannot convert \"' + Qa(f) + '\" to ' + this.name);\n            return f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Ra(b, c),\n          F: null\n        });\n      },\n      f: function (a, b, c, d, f, g) {\n        var l = Wa(b, c);\n        a = P(a);\n        f = Ya(d, f);\n        Va(a, function () {\n          bb('Cannot call ' + a + ' due to unbound types', l);\n        }, b - 1);\n        Ka(l, function (h) {\n          var p = a,\n              k = a;\n          h = [h[0], null].concat(h.slice(1));\n          var m = f,\n              q = h.length;\n          2 > q && T(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var x = null !== h[1] && !1, C = !1, n = 1; n < h.length; ++n) if (null !== h[n] && void 0 === h[n].F) {\n            C = !0;\n            break;\n          }\n\n          var La = 'void' !== h[0].name,\n              I = '',\n              M = '';\n\n          for (n = 0; n < q - 2; ++n) I += (0 !== n ? ', ' : '') + 'arg' + n, M += (0 !== n ? ', ' : '') + 'arg' + n + 'Wired';\n\n          k = 'return function ' + Fa(k) + '(' + I + ') {\\nif (arguments.length !== ' + (q - 2) + \") {\\nthrowBindingError('function \" + k + \" called with ' + arguments.length + ' arguments, expected \" + (q - 2) + \" args!');\\n}\\n\";\n          C && (k += 'var destructors = [];\\n');\n          var Ma = C ? 'destructors' : 'null';\n          I = 'throwBindingError invoker fn runDestructors retType classParam'.split(' ');\n          m = [T, m, g, Ta, h[0], h[1]];\n          x && (k += 'var thisWired = classParam.toWireType(' + Ma + ', this);\\n');\n\n          for (n = 0; n < q - 2; ++n) k += 'var arg' + n + 'Wired = argType' + n + '.toWireType(' + Ma + ', arg' + n + '); // ' + h[n + 2].name + '\\n', I.push('argType' + n), m.push(h[n + 2]);\n\n          x && (M = 'thisWired' + (0 < M.length ? ', ' : '') + M);\n          k += (La ? 'var rv = ' : '') + 'invoker(fn' + (0 < M.length ? ', ' : '') + M + ');\\n';\n          if (C) k += 'runDestructors(destructors);\\n';else for (n = x ? 1 : 2; n < h.length; ++n) q = 1 === n ? 'thisWired' : 'arg' + (n - 2) + 'Wired', null !== h[n].F && (k += q + '_dtor(' + q + '); // ' + h[n].name + '\\n', I.push(q + '_dtor'), m.push(h[n].F));\n          La && (k += 'var ret = retType.fromWireType(rv);\\nreturn ret;\\n');\n          I.push(k + '}\\n');\n          h = Sa(I).apply(null, m);\n          n = b - 1;\n          if (!e.hasOwnProperty(p)) throw new Ja('Replacing nonexistant public symbol');\n          void 0 !== e[p].D && void 0 !== n ? e[p].D[n] = h : (e[p] = h, e[p].I = n);\n          return [];\n        });\n      },\n      c: function (a, b, c, d, f) {\n        function g(k) {\n          return k;\n        }\n\n        b = P(b);\n        -1 === f && (f = 4294967295);\n        var l = Da(c);\n\n        if (0 === d) {\n          var h = 32 - 8 * c;\n\n          g = function (k) {\n            return k << h >>> h;\n          };\n        }\n\n        var p = -1 != b.indexOf('unsigned');\n        U(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function (k, m) {\n            if ('number' !== typeof m && 'boolean' !== typeof m) throw new TypeError('Cannot convert \"' + Qa(m) + '\" to ' + this.name);\n            if (m < d || m > f) throw new TypeError('Passing a number \"' + Qa(m) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + d + ', ' + f + ']!');\n            return p ? m >>> 0 : m | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: cb(b, l, 0 !== d),\n          F: null\n        });\n      },\n      b: function (a, b, c) {\n        function d(g) {\n          g >>= 2;\n          var l = H;\n          return new f(G, l[g + 1], l[g]);\n        }\n\n        var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        c = P(c);\n        U(a, {\n          name: c,\n          fromWireType: d,\n          argPackAdvance: 8,\n          readValueFromPointer: d\n        }, {\n          K: !0\n        });\n      },\n      i: function (a, b) {\n        b = P(b);\n        var c = 'std::string' === b;\n        U(a, {\n          name: b,\n          fromWireType: function (d) {\n            var f = H[d >> 2];\n            if (c) for (var g = d + 4, l = 0; l <= f; ++l) {\n              var h = d + 4 + l;\n\n              if (l == f || 0 == B[h]) {\n                if (g) {\n                  for (var p = g + (h - g), k = g; !(k >= p) && B[k];) ++k;\n\n                  g = ea.decode(B.subarray(g, k));\n                } else g = '';\n\n                if (void 0 === m) var m = g;else m += String.fromCharCode(0), m += g;\n                g = h + 1;\n              }\n            } else {\n              m = Array(f);\n\n              for (l = 0; l < f; ++l) m[l] = String.fromCharCode(B[d + 4 + l]);\n\n              m = m.join('');\n            }\n            X(d);\n            return m;\n          },\n          toWireType: function (d, f) {\n            f instanceof ArrayBuffer && (f = new Uint8Array(f));\n            var g = 'string' === typeof f;\n            g || f instanceof Uint8Array || f instanceof Uint8ClampedArray || f instanceof Int8Array || T('Cannot pass non-string to std::string');\n            var l = (c && g ? function () {\n              for (var k = 0, m = 0; m < f.length; ++m) {\n                var q = f.charCodeAt(m);\n                55296 <= q && 57343 >= q && (q = 65536 + ((q & 1023) << 10) | f.charCodeAt(++m) & 1023);\n                127 >= q ? ++k : k = 2047 >= q ? k + 2 : 65535 >= q ? k + 3 : k + 4;\n              }\n\n              return k;\n            } : function () {\n              return f.length;\n            })(),\n                h = kb(4 + l + 1);\n            H[h >> 2] = l;\n            if (c && g) fa(f, h + 4, l + 1);else if (g) for (g = 0; g < l; ++g) {\n              var p = f.charCodeAt(g);\n              255 < p && (X(h), T('String has UTF-16 code units that do not fit in 8 bits'));\n              B[h + 4 + g] = p;\n            } else for (g = 0; g < l; ++g) B[h + 4 + g] = f[g];\n            null !== d && d.push(X, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Pa,\n          F: function (d) {\n            X(d);\n          }\n        });\n      },\n      h: function (a, b, c) {\n        c = P(c);\n\n        if (2 === b) {\n          var d = ia;\n          var f = ja;\n          var g = ka;\n\n          var l = function () {\n            return D;\n          };\n\n          var h = 1;\n        } else 4 === b && (d = la, f = ma, g = na, l = function () {\n          return H;\n        }, h = 2);\n\n        U(a, {\n          name: c,\n          fromWireType: function (p) {\n            for (var k = H[p >> 2], m = l(), q, x = p + 4, C = 0; C <= k; ++C) {\n              var n = p + 4 + C * b;\n              if (C == k || 0 == m[n >> h]) x = d(x, n - x), void 0 === q ? q = x : (q += String.fromCharCode(0), q += x), x = n + b;\n            }\n\n            X(p);\n            return q;\n          },\n          toWireType: function (p, k) {\n            'string' !== typeof k && T('Cannot pass non-string to C++ string type ' + c);\n            var m = g(k),\n                q = kb(4 + m + b);\n            H[q >> 2] = m >> h;\n            f(k, q + 4, m + b);\n            null !== p && p.push(X, q);\n            return q;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Pa,\n          F: function (p) {\n            X(p);\n          }\n        });\n      },\n      q: function (a, b) {\n        b = P(b);\n        U(a, {\n          L: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function () {},\n          toWireType: function () {}\n        });\n      },\n      g: Oa,\n      n: function (a) {\n        if (0 === a) return W(eb());\n        var b = db[a];\n        a = void 0 === b ? P(a) : b;\n        return W(eb()[a]);\n      },\n      j: function (a) {\n        4 < a && (V[a].H += 1);\n      },\n      k: function (a, b, c, d) {\n        a || T('Cannot use deleted val. handle = ' + a);\n        a = V[a].value;\n        var f = gb[b];\n\n        if (!f) {\n          f = '';\n\n          for (var g = 0; g < b; ++g) f += (0 !== g ? ', ' : '') + 'arg' + g;\n\n          var l = 'return function emval_allocator_' + b + '(constructor, argTypes, args) {\\n';\n\n          for (g = 0; g < b; ++g) l += 'var argType' + g + \" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + \" + g + '], \"parameter ' + g + '\");\\nvar arg' + g + ' = argType' + g + '.readValueFromPointer(args);\\nargs += argType' + g + \"['argPackAdvance'];\\n\";\n\n          f = new Function('requireRegisteredType', 'Module', '__emval_register', l + ('var obj = new constructor(' + f + ');\\nreturn __emval_register(obj);\\n}\\n'))(fb, e, W);\n          gb[b] = f;\n        }\n\n        return f(a, c, d);\n      },\n      e: function () {\n        z();\n      },\n      t: function (a, b, c) {\n        B.copyWithin(a, b, b + c);\n      },\n      d: function (a) {\n        a >>>= 0;\n        var b = B.length;\n        if (2147483648 < a) return !1;\n\n        for (var c = 1; 4 >= c; c *= 2) {\n          var d = b * (1 + 0.2 / c);\n          d = Math.min(d, a + 100663296);\n          d = Math.max(16777216, a, d);\n          0 < d % 65536 && (d += 65536 - d % 65536);\n\n          a: {\n            try {\n              A.grow(Math.min(2147483648, d) - G.byteLength + 65535 >>> 16);\n              ra(A.buffer);\n              var f = 1;\n              break a;\n            } catch (g) {}\n\n            f = void 0;\n          }\n\n          if (f) return !0;\n        }\n\n        return !1;\n      },\n      u: function () {\n        return 0;\n      },\n      r: function () {},\n      l: function (a, b, c, d) {\n        for (var f = 0, g = 0; g < c; g++) {\n          for (var l = F[b + 8 * g >> 2], h = F[b + (8 * g + 4) >> 2], p = 0; p < h; p++) {\n            var k = B[l + p],\n                m = hb[a];\n\n            if (0 === k || 10 === k) {\n              for (k = 0; m[k] && !(NaN <= k);) ++k;\n\n              k = ea.decode(m.subarray ? m.subarray(0, k) : new Uint8Array(m.slice(0, k)));\n              (1 === a ? ca : w)(k);\n              m.length = 0;\n            } else m.push(k);\n          }\n\n          f += h;\n        }\n\n        F[d >> 2] = f;\n        return 0;\n      },\n      a: A,\n      s: function () {}\n    };\n\n    (function () {\n      function a(f) {\n        e.asm = f.exports;\n        J = e.asm.w;\n        K--;\n        e.monitorRunDependencies && e.monitorRunDependencies(K);\n        0 == K && (null !== ya && (clearInterval(ya), ya = null), L && (f = L, L = null, f()));\n      }\n\n      function b(f) {\n        a(f.instance);\n      }\n\n      function c(f) {\n        return Ca().then(function (g) {\n          return WebAssembly.instantiate(g, d);\n        }).then(f, function (g) {\n          w('failed to asynchronously prepare wasm: ' + g);\n          z(g);\n        });\n      }\n\n      var d = {\n        a: lb\n      };\n      K++;\n      e.monitorRunDependencies && e.monitorRunDependencies(K);\n      if (e.instantiateWasm) try {\n        return e.instantiateWasm(d, a);\n      } catch (f) {\n        return w('Module.instantiateWasm callback failed with error: ' + f), !1;\n      }\n      (function () {\n        return y || 'function' !== typeof WebAssembly.instantiateStreaming || za() || 'function' !== typeof fetch ? c(b) : fetch(N, {\n          credentials: 'same-origin'\n        }).then(function (f) {\n          return WebAssembly.instantiateStreaming(f, d).then(b, function (g) {\n            w('wasm streaming compile failed: ' + g);\n            w('falling back to ArrayBuffer instantiation');\n            return c(b);\n          });\n        });\n      })().catch(r);\n      return {};\n    })();\n\n    var jb = e.___wasm_call_ctors = function () {\n      return (jb = e.___wasm_call_ctors = e.asm.x).apply(null, arguments);\n    },\n        kb = e._malloc = function () {\n      return (kb = e._malloc = e.asm.y).apply(null, arguments);\n    },\n        X = e._free = function () {\n      return (X = e._free = e.asm.z).apply(null, arguments);\n    },\n        ab = e.___getTypeName = function () {\n      return (ab = e.___getTypeName = e.asm.A).apply(null, arguments);\n    };\n\n    e.___embind_register_native_and_builtin_types = function () {\n      return (e.___embind_register_native_and_builtin_types = e.asm.B).apply(null, arguments);\n    };\n\n    e.dynCall_jiji = function () {\n      return (e.dynCall_jiji = e.asm.C).apply(null, arguments);\n    };\n\n    var Z;\n\n    L = function mb() {\n      Z || nb();\n      Z || (L = mb);\n    };\n\n    function nb() {\n      function a() {\n        if (!Z && (Z = !0, e.calledRun = !0, !da)) {\n          O(ua);\n          O(va);\n          aa(e);\n          if (e.onRuntimeInitialized) e.onRuntimeInitialized();\n          if (e.postRun) for ('function' == typeof e.postRun && (e.postRun = [e.postRun]); e.postRun.length;) {\n            var b = e.postRun.shift();\n            wa.unshift(b);\n          }\n          O(wa);\n        }\n      }\n\n      if (!(0 < K)) {\n        if (e.preRun) for ('function' == typeof e.preRun && (e.preRun = [e.preRun]); e.preRun.length;) xa();\n        O(ta);\n        0 < K || (e.setStatus ? (e.setStatus('Running...'), setTimeout(function () {\n          setTimeout(function () {\n            e.setStatus('');\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    e.run = nb;\n    if (e.preInit) for ('function' == typeof e.preInit && (e.preInit = [e.preInit]); 0 < e.preInit.length;) e.preInit.pop()();\n    noExitRuntime = !0;\n    nb();\n    return Module.ready;\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Module);\n\n//# sourceURL=webpack://squooshCore/./codecs/imagequant/imagequant.js?");

/***/ }),

/***/ "./codecs/mozjpeg_enc/mozjpeg_enc.js":
/*!*******************************************!*\
  !*** ./codecs/mozjpeg_enc/mozjpeg_enc.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Module = function () {\n  // var _scriptDir = import.meta.url;\n  var _scriptDir = '';\n  return function (Module) {\n    Module = Module || {};\n    var f;\n    f || (f = typeof Module !== 'undefined' ? Module : {});\n    var aa, ba;\n    f.ready = new Promise(function (a, b) {\n      aa = a;\n      ba = b;\n    });\n    var r = {},\n        t;\n\n    for (t in f) f.hasOwnProperty(t) && (r[t] = f[t]);\n\n    var ca = './this.program';\n\n    function ea(a, b) {\n      throw b;\n    }\n\n    var u = '',\n        fa;\n    u = self.location.href;\n    _scriptDir && (u = _scriptDir);\n    0 !== u.indexOf('blob:') ? u = u.substr(0, u.lastIndexOf('/') + 1) : u = '';\n\n    fa = function (a) {\n      var b = new XMLHttpRequest();\n      b.open('GET', a, !1);\n      b.responseType = 'arraybuffer';\n      b.send(null);\n      return new Uint8Array(b.response);\n    };\n\n    var ha = f.print || console.log.bind(console),\n        v = f.printErr || console.warn.bind(console);\n\n    for (t in r) r.hasOwnProperty(t) && (f[t] = r[t]);\n\n    r = null;\n    f.thisProgram && (ca = f.thisProgram);\n    f.quit && (ea = f.quit);\n    var w;\n    f.wasmBinary && (w = f.wasmBinary);\n    var noExitRuntime;\n    f.noExitRuntime && (noExitRuntime = f.noExitRuntime);\n    'object' !== typeof WebAssembly && A('no native wasm support detected');\n    var B,\n        ia = !1,\n        ja = new TextDecoder('utf8');\n\n    function ka(a, b, c) {\n      var d = C;\n\n      if (0 < c) {\n        c = b + c - 1;\n\n        for (var e = 0; e < a.length; ++e) {\n          var g = a.charCodeAt(e);\n\n          if (55296 <= g && 57343 >= g) {\n            var m = a.charCodeAt(++e);\n            g = 65536 + ((g & 1023) << 10) | m & 1023;\n          }\n\n          if (127 >= g) {\n            if (b >= c) break;\n            d[b++] = g;\n          } else {\n            if (2047 >= g) {\n              if (b + 1 >= c) break;\n              d[b++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (b + 2 >= c) break;\n                d[b++] = 224 | g >> 12;\n              } else {\n                if (b + 3 >= c) break;\n                d[b++] = 240 | g >> 18;\n                d[b++] = 128 | g >> 12 & 63;\n              }\n\n              d[b++] = 128 | g >> 6 & 63;\n            }\n\n            d[b++] = 128 | g & 63;\n          }\n        }\n\n        d[b] = 0;\n      }\n    }\n\n    var la = new TextDecoder('utf-16le');\n\n    function ma(a, b) {\n      var c = a >> 1;\n\n      for (b = c + b / 2; !(c >= b) && D[c];) ++c;\n\n      return la.decode(C.subarray(a, c << 1));\n    }\n\n    function na(a, b, c) {\n      void 0 === c && (c = 2147483647);\n      if (2 > c) return 0;\n      c -= 2;\n      var d = b;\n      c = c < 2 * a.length ? c / 2 : a.length;\n\n      for (var e = 0; e < c; ++e) E[b >> 1] = a.charCodeAt(e), b += 2;\n\n      E[b >> 1] = 0;\n      return b - d;\n    }\n\n    function oa(a) {\n      return 2 * a.length;\n    }\n\n    function pa(a, b) {\n      for (var c = 0, d = ''; !(c >= b / 4);) {\n        var e = G[a + 4 * c >> 2];\n        if (0 == e) break;\n        ++c;\n        65536 <= e ? (e -= 65536, d += String.fromCharCode(55296 | e >> 10, 56320 | e & 1023)) : d += String.fromCharCode(e);\n      }\n\n      return d;\n    }\n\n    function qa(a, b, c) {\n      void 0 === c && (c = 2147483647);\n      if (4 > c) return 0;\n      var d = b;\n      c = d + c - 4;\n\n      for (var e = 0; e < a.length; ++e) {\n        var g = a.charCodeAt(e);\n\n        if (55296 <= g && 57343 >= g) {\n          var m = a.charCodeAt(++e);\n          g = 65536 + ((g & 1023) << 10) | m & 1023;\n        }\n\n        G[b >> 2] = g;\n        b += 4;\n        if (b + 4 > c) break;\n      }\n\n      G[b >> 2] = 0;\n      return b - d;\n    }\n\n    function ra(a) {\n      for (var b = 0, c = 0; c < a.length; ++c) {\n        var d = a.charCodeAt(c);\n        55296 <= d && 57343 >= d && ++c;\n        b += 4;\n      }\n\n      return b;\n    }\n\n    var H, I, C, E, D, G, J, sa, ta;\n\n    function ua(a) {\n      H = a;\n      f.HEAP8 = I = new Int8Array(a);\n      f.HEAP16 = E = new Int16Array(a);\n      f.HEAP32 = G = new Int32Array(a);\n      f.HEAPU8 = C = new Uint8Array(a);\n      f.HEAPU16 = D = new Uint16Array(a);\n      f.HEAPU32 = J = new Uint32Array(a);\n      f.HEAPF32 = sa = new Float32Array(a);\n      f.HEAPF64 = ta = new Float64Array(a);\n    }\n\n    var va = f.INITIAL_MEMORY || 16777216;\n    f.wasmMemory ? B = f.wasmMemory : B = new WebAssembly.Memory({\n      initial: va / 65536,\n      maximum: 32768\n    });\n    B && (H = B.buffer);\n    va = H.byteLength;\n    ua(H);\n    var K,\n        wa = [],\n        xa = [],\n        ya = [],\n        za = [];\n\n    function Aa() {\n      var a = f.preRun.shift();\n      wa.unshift(a);\n    }\n\n    var L = 0,\n        Ba = null,\n        M = null;\n    f.preloadedImages = {};\n    f.preloadedAudios = {};\n\n    function A(a) {\n      if (f.onAbort) f.onAbort(a);\n      v(a);\n      ia = !0;\n      a = new WebAssembly.RuntimeError('abort(' + a + '). Build with -s ASSERTIONS=1 for more info.');\n      ba(a);\n      throw a;\n    }\n\n    function Ca() {\n      var a = N;\n      return String.prototype.startsWith ? a.startsWith('data:application/octet-stream;base64,') : 0 === a.indexOf('data:application/octet-stream;base64,');\n    }\n\n    var N = 'mozjpeg_enc.wasm';\n\n    if (!Ca()) {\n      var Da = N;\n      N = f.locateFile ? f.locateFile(Da, u) : u + Da;\n    }\n\n    function Ea() {\n      try {\n        if (w) return new Uint8Array(w);\n        if (fa) return fa(N);\n        throw 'both async and sync fetching of the wasm failed';\n      } catch (a) {\n        A(a);\n      }\n    }\n\n    function Fa() {\n      return w || 'function' !== typeof fetch ? Promise.resolve().then(Ea) : fetch(N, {\n        credentials: 'same-origin'\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + N + \"'\";\n        return a.arrayBuffer();\n      }).catch(function () {\n        return Ea();\n      });\n    }\n\n    function O(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if ('function' == typeof b) b(f);else {\n          var c = b.R;\n          'number' === typeof c ? void 0 === b.L ? K.get(c)() : K.get(c)(b.L) : c(void 0 === b.L ? null : b.L);\n        }\n      }\n    }\n\n    var P = {};\n\n    function Ga(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function Q(a) {\n      return this.fromWireType(J[a >> 2]);\n    }\n\n    var R = {},\n        S = {},\n        Ha = {};\n\n    function Ia(a) {\n      if (void 0 === a) return '_unknown';\n      a = a.replace(/[^a-zA-Z0-9_]/g, '$');\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? '_' + a : a;\n    }\n\n    function Ja(a, b) {\n      a = Ia(a);\n      return new Function('body', 'return function ' + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function Ka(a) {\n      var b = Error,\n          c = Ja(a, function (d) {\n        this.name = a;\n        this.message = d;\n        d = Error(d).stack;\n        void 0 !== d && (this.stack = this.toString() + '\\n' + d.replace(/^Error(:[^\\n]*)?\\n/, ''));\n      });\n      c.prototype = Object.create(b.prototype);\n      c.prototype.constructor = c;\n\n      c.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + ': ' + this.message;\n      };\n\n      return c;\n    }\n\n    var La = void 0;\n\n    function Ma(a, b, c) {\n      function d(h) {\n        h = c(h);\n        if (h.length !== a.length) throw new La('Mismatched type converter count');\n\n        for (var n = 0; n < a.length; ++n) T(a[n], h[n]);\n      }\n\n      a.forEach(function (h) {\n        Ha[h] = b;\n      });\n      var e = Array(b.length),\n          g = [],\n          m = 0;\n      b.forEach(function (h, n) {\n        S.hasOwnProperty(h) ? e[n] = S[h] : (g.push(h), R.hasOwnProperty(h) || (R[h] = []), R[h].push(function () {\n          e[n] = S[h];\n          ++m;\n          m === g.length && d(e);\n        }));\n      });\n      0 === g.length && d(e);\n    }\n\n    function Na(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError('Unknown type size: ' + a);\n      }\n    }\n\n    var Oa = void 0;\n\n    function U(a) {\n      for (var b = ''; C[a];) b += Oa[C[a++]];\n\n      return b;\n    }\n\n    var Pa = void 0;\n\n    function W(a) {\n      throw new Pa(a);\n    }\n\n    function T(a, b, c) {\n      c = c || {};\n      if (!('argPackAdvance' in b)) throw new TypeError('registerType registeredInstance requires argPackAdvance');\n      var d = b.name;\n      a || W('type \"' + d + '\" must have a positive integer typeid pointer');\n\n      if (S.hasOwnProperty(a)) {\n        if (c.V) return;\n        W(\"Cannot register type '\" + d + \"' twice\");\n      }\n\n      S[a] = b;\n      delete Ha[a];\n      R.hasOwnProperty(a) && (b = R[a], delete R[a], b.forEach(function (e) {\n        e();\n      }));\n    }\n\n    var Qa = [],\n        X = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function Ra(a) {\n      4 < a && 0 === --X[a].M && (X[a] = void 0, Qa.push(a));\n    }\n\n    function Sa(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = Qa.length ? Qa.pop() : X.length;\n          X[b] = {\n            M: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function Ta(a) {\n      if (null === a) return 'null';\n      var b = typeof a;\n      return 'object' === b || 'array' === b || 'function' === b ? a.toString() : '' + a;\n    }\n\n    function Ua(a, b) {\n      switch (b) {\n        case 2:\n          return function (c) {\n            return this.fromWireType(sa[c >> 2]);\n          };\n\n        case 3:\n          return function (c) {\n            return this.fromWireType(ta[c >> 3]);\n          };\n\n        default:\n          throw new TypeError('Unknown float type: ' + a);\n      }\n    }\n\n    function Va(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError('new_ called with constructor type ' + typeof b + ' which is not a function');\n      var c = Ja(b.name || 'unknownFunctionName', function () {});\n      c.prototype = b.prototype;\n      c = new c();\n      a = b.apply(c, a);\n      return a instanceof Object ? a : c;\n    }\n\n    function Wa(a, b) {\n      var c = f;\n\n      if (void 0 === c[a].J) {\n        var d = c[a];\n\n        c[a] = function () {\n          c[a].J.hasOwnProperty(arguments.length) || W(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + ') - expects one of (' + c[a].J + ')!');\n          return c[a].J[arguments.length].apply(this, arguments);\n        };\n\n        c[a].J = [];\n        c[a].J[d.O] = d;\n      }\n    }\n\n    function Xa(a, b, c) {\n      f.hasOwnProperty(a) ? ((void 0 === c || void 0 !== f[a].J && void 0 !== f[a].J[c]) && W(\"Cannot register public name '\" + a + \"' twice\"), Wa(a, a), f.hasOwnProperty(c) && W('Cannot register multiple overloads of a function with the same number of arguments (' + c + ')!'), f[a].J[c] = b) : (f[a] = b, void 0 !== c && (f[a].ba = c));\n    }\n\n    function Ya(a, b) {\n      for (var c = [], d = 0; d < a; d++) c.push(G[(b >> 2) + d]);\n\n      return c;\n    }\n\n    function Za(a, b) {\n      0 <= a.indexOf('j') || A('Assertion failed: getDynCaller should only be called with i64 sigs');\n      var c = [];\n      return function () {\n        c.length = arguments.length;\n\n        for (var d = 0; d < arguments.length; d++) c[d] = arguments[d];\n\n        var e;\n        -1 != a.indexOf('j') ? e = c && c.length ? f['dynCall_' + a].apply(null, [b].concat(c)) : f['dynCall_' + a].call(null, b) : e = K.get(b).apply(null, c);\n        return e;\n      };\n    }\n\n    function Y(a, b) {\n      a = U(a);\n      var c = -1 != a.indexOf('j') ? Za(a, b) : K.get(b);\n      'function' !== typeof c && W('unknown function pointer with signature ' + a + ': ' + b);\n      return c;\n    }\n\n    var $a = void 0;\n\n    function ab(a) {\n      a = bb(a);\n      var b = U(a);\n      Z(a);\n      return b;\n    }\n\n    function cb(a, b) {\n      function c(g) {\n        e[g] || S[g] || (Ha[g] ? Ha[g].forEach(c) : (d.push(g), e[g] = !0));\n      }\n\n      var d = [],\n          e = {};\n      b.forEach(c);\n      throw new $a(a + ': ' + d.map(ab).join([', ']));\n    }\n\n    function db(a, b, c) {\n      switch (b) {\n        case 0:\n          return c ? function (d) {\n            return I[d];\n          } : function (d) {\n            return C[d];\n          };\n\n        case 1:\n          return c ? function (d) {\n            return E[d >> 1];\n          } : function (d) {\n            return D[d >> 1];\n          };\n\n        case 2:\n          return c ? function (d) {\n            return G[d >> 2];\n          } : function (d) {\n            return J[d >> 2];\n          };\n\n        default:\n          throw new TypeError('Unknown integer type: ' + a);\n      }\n    }\n\n    var eb = {};\n\n    function fb() {\n      return 'object' === typeof globalThis ? globalThis : Function('return this')();\n    }\n\n    function gb(a, b) {\n      var c = S[a];\n      void 0 === c && W(b + ' has unknown type ' + ab(a));\n      return c;\n    }\n\n    var hb = {},\n        ib = {};\n\n    function jb() {\n      if (!kb) {\n        var a = {\n          USER: 'web_user',\n          LOGNAME: 'web_user',\n          PATH: '/',\n          PWD: '/',\n          HOME: '/home/web_user',\n          LANG: ('object' === typeof navigator && navigator.languages && navigator.languages[0] || 'C').replace('-', '_') + '.UTF-8',\n          _: ca || './this.program'\n        },\n            b;\n\n        for (b in ib) a[b] = ib[b];\n\n        var c = [];\n\n        for (b in a) c.push(b + '=' + a[b]);\n\n        kb = c;\n      }\n\n      return kb;\n    }\n\n    var kb,\n        lb = [null, [], []];\n    La = f.InternalError = Ka('InternalError');\n\n    for (var mb = Array(256), nb = 0; 256 > nb; ++nb) mb[nb] = String.fromCharCode(nb);\n\n    Oa = mb;\n    Pa = f.BindingError = Ka('BindingError');\n\n    f.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < X.length; ++b) void 0 !== X[b] && ++a;\n\n      return a;\n    };\n\n    f.get_first_emval = function () {\n      for (var a = 5; a < X.length; ++a) if (void 0 !== X[a]) return X[a];\n\n      return null;\n    };\n\n    $a = f.UnboundTypeError = Ka('UnboundTypeError');\n    xa.push({\n      R: function () {\n        ob();\n      }\n    });\n    var rb = {\n      B: function () {},\n      o: function (a) {\n        var b = P[a];\n        delete P[a];\n        var c = b.W,\n            d = b.X,\n            e = b.N,\n            g = e.map(function (m) {\n          return m.U;\n        }).concat(e.map(function (m) {\n          return m.Z;\n        }));\n        Ma([a], g, function (m) {\n          var h = {};\n          e.forEach(function (n, k) {\n            var l = m[k],\n                q = n.S,\n                x = n.T,\n                y = m[k + e.length],\n                p = n.Y,\n                da = n.$;\n            h[n.P] = {\n              read: function (z) {\n                return l.fromWireType(q(x, z));\n              },\n              write: function (z, F) {\n                var V = [];\n                p(da, z, y.toWireType(V, F));\n                Ga(V);\n              }\n            };\n          });\n          return [{\n            name: b.name,\n            fromWireType: function (n) {\n              var k = {},\n                  l;\n\n              for (l in h) k[l] = h[l].read(n);\n\n              d(n);\n              return k;\n            },\n            toWireType: function (n, k) {\n              for (var l in h) if (!(l in k)) throw new TypeError('Missing field:  \"' + l + '\"');\n\n              var q = c();\n\n              for (l in h) h[l].write(q, k[l]);\n\n              null !== n && n.push(d, q);\n              return q;\n            },\n            argPackAdvance: 8,\n            readValueFromPointer: Q,\n            K: d\n          }];\n        });\n      },\n      y: function (a, b, c, d, e) {\n        var g = Na(c);\n        b = U(b);\n        T(a, {\n          name: b,\n          fromWireType: function (m) {\n            return !!m;\n          },\n          toWireType: function (m, h) {\n            return h ? d : e;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function (m) {\n            if (1 === c) var h = I;else if (2 === c) h = E;else if (4 === c) h = G;else throw new TypeError('Unknown boolean type size: ' + b);\n            return this.fromWireType(h[m >> g]);\n          },\n          K: null\n        });\n      },\n      x: function (a, b) {\n        b = U(b);\n        T(a, {\n          name: b,\n          fromWireType: function (c) {\n            var d = X[c].value;\n            Ra(c);\n            return d;\n          },\n          toWireType: function (c, d) {\n            return Sa(d);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Q,\n          K: null\n        });\n      },\n      k: function (a, b, c) {\n        c = Na(c);\n        b = U(b);\n        T(a, {\n          name: b,\n          fromWireType: function (d) {\n            return d;\n          },\n          toWireType: function (d, e) {\n            if ('number' !== typeof e && 'boolean' !== typeof e) throw new TypeError('Cannot convert \"' + Ta(e) + '\" to ' + this.name);\n            return e;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Ua(b, c),\n          K: null\n        });\n      },\n      g: function (a, b, c, d, e, g) {\n        var m = Ya(b, c);\n        a = U(a);\n        e = Y(d, e);\n        Xa(a, function () {\n          cb('Cannot call ' + a + ' due to unbound types', m);\n        }, b - 1);\n        Ma([], m, function (h) {\n          var n = a,\n              k = a;\n          h = [h[0], null].concat(h.slice(1));\n          var l = e,\n              q = h.length;\n          2 > q && W(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var x = null !== h[1] && !1, y = !1, p = 1; p < h.length; ++p) if (null !== h[p] && void 0 === h[p].K) {\n            y = !0;\n            break;\n          }\n\n          var da = 'void' !== h[0].name,\n              z = '',\n              F = '';\n\n          for (p = 0; p < q - 2; ++p) z += (0 !== p ? ', ' : '') + 'arg' + p, F += (0 !== p ? ', ' : '') + 'arg' + p + 'Wired';\n\n          k = 'return function ' + Ia(k) + '(' + z + ') {\\nif (arguments.length !== ' + (q - 2) + \") {\\nthrowBindingError('function \" + k + \" called with ' + arguments.length + ' arguments, expected \" + (q - 2) + \" args!');\\n}\\n\";\n          y && (k += 'var destructors = [];\\n');\n          var V = y ? 'destructors' : 'null';\n          z = 'throwBindingError invoker fn runDestructors retType classParam'.split(' ');\n          l = [W, l, g, Ga, h[0], h[1]];\n          x && (k += 'var thisWired = classParam.toWireType(' + V + ', this);\\n');\n\n          for (p = 0; p < q - 2; ++p) k += 'var arg' + p + 'Wired = argType' + p + '.toWireType(' + V + ', arg' + p + '); // ' + h[p + 2].name + '\\n', z.push('argType' + p), l.push(h[p + 2]);\n\n          x && (F = 'thisWired' + (0 < F.length ? ', ' : '') + F);\n          k += (da ? 'var rv = ' : '') + 'invoker(fn' + (0 < F.length ? ', ' : '') + F + ');\\n';\n          if (y) k += 'runDestructors(destructors);\\n';else for (p = x ? 1 : 2; p < h.length; ++p) q = 1 === p ? 'thisWired' : 'arg' + (p - 2) + 'Wired', null !== h[p].K && (k += q + '_dtor(' + q + '); // ' + h[p].name + '\\n', z.push(q + '_dtor'), l.push(h[p].K));\n          da && (k += 'var ret = retType.fromWireType(rv);\\nreturn ret;\\n');\n          z.push(k + '}\\n');\n          h = Va(z).apply(null, l);\n          p = b - 1;\n          if (!f.hasOwnProperty(n)) throw new La('Replacing nonexistant public symbol');\n          void 0 !== f[n].J && void 0 !== p ? f[n].J[p] = h : (f[n] = h, f[n].O = p);\n          return [];\n        });\n      },\n      d: function (a, b, c, d, e) {\n        function g(k) {\n          return k;\n        }\n\n        b = U(b);\n        -1 === e && (e = 4294967295);\n        var m = Na(c);\n\n        if (0 === d) {\n          var h = 32 - 8 * c;\n\n          g = function (k) {\n            return k << h >>> h;\n          };\n        }\n\n        var n = -1 != b.indexOf('unsigned');\n        T(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function (k, l) {\n            if ('number' !== typeof l && 'boolean' !== typeof l) throw new TypeError('Cannot convert \"' + Ta(l) + '\" to ' + this.name);\n            if (l < d || l > e) throw new TypeError('Passing a number \"' + Ta(l) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + d + ', ' + e + ']!');\n            return n ? l >>> 0 : l | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: db(b, m, 0 !== d),\n          K: null\n        });\n      },\n      c: function (a, b, c) {\n        function d(g) {\n          g >>= 2;\n          var m = J;\n          return new e(H, m[g + 1], m[g]);\n        }\n\n        var e = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        c = U(c);\n        T(a, {\n          name: c,\n          fromWireType: d,\n          argPackAdvance: 8,\n          readValueFromPointer: d\n        }, {\n          V: !0\n        });\n      },\n      l: function (a, b) {\n        b = U(b);\n        var c = 'std::string' === b;\n        T(a, {\n          name: b,\n          fromWireType: function (d) {\n            var e = J[d >> 2];\n            if (c) for (var g = d + 4, m = 0; m <= e; ++m) {\n              var h = d + 4 + m;\n\n              if (m == e || 0 == C[h]) {\n                if (g) {\n                  for (var n = g + (h - g), k = g; !(k >= n) && C[k];) ++k;\n\n                  g = ja.decode(C.subarray(g, k));\n                } else g = '';\n\n                if (void 0 === l) var l = g;else l += String.fromCharCode(0), l += g;\n                g = h + 1;\n              }\n            } else {\n              l = Array(e);\n\n              for (m = 0; m < e; ++m) l[m] = String.fromCharCode(C[d + 4 + m]);\n\n              l = l.join('');\n            }\n            Z(d);\n            return l;\n          },\n          toWireType: function (d, e) {\n            e instanceof ArrayBuffer && (e = new Uint8Array(e));\n            var g = 'string' === typeof e;\n            g || e instanceof Uint8Array || e instanceof Uint8ClampedArray || e instanceof Int8Array || W('Cannot pass non-string to std::string');\n            var m = (c && g ? function () {\n              for (var k = 0, l = 0; l < e.length; ++l) {\n                var q = e.charCodeAt(l);\n                55296 <= q && 57343 >= q && (q = 65536 + ((q & 1023) << 10) | e.charCodeAt(++l) & 1023);\n                127 >= q ? ++k : k = 2047 >= q ? k + 2 : 65535 >= q ? k + 3 : k + 4;\n              }\n\n              return k;\n            } : function () {\n              return e.length;\n            })(),\n                h = pb(4 + m + 1);\n            J[h >> 2] = m;\n            if (c && g) ka(e, h + 4, m + 1);else if (g) for (g = 0; g < m; ++g) {\n              var n = e.charCodeAt(g);\n              255 < n && (Z(h), W('String has UTF-16 code units that do not fit in 8 bits'));\n              C[h + 4 + g] = n;\n            } else for (g = 0; g < m; ++g) C[h + 4 + g] = e[g];\n            null !== d && d.push(Z, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Q,\n          K: function (d) {\n            Z(d);\n          }\n        });\n      },\n      f: function (a, b, c) {\n        c = U(c);\n\n        if (2 === b) {\n          var d = ma;\n          var e = na;\n          var g = oa;\n\n          var m = function () {\n            return D;\n          };\n\n          var h = 1;\n        } else 4 === b && (d = pa, e = qa, g = ra, m = function () {\n          return J;\n        }, h = 2);\n\n        T(a, {\n          name: c,\n          fromWireType: function (n) {\n            for (var k = J[n >> 2], l = m(), q, x = n + 4, y = 0; y <= k; ++y) {\n              var p = n + 4 + y * b;\n              if (y == k || 0 == l[p >> h]) x = d(x, p - x), void 0 === q ? q = x : (q += String.fromCharCode(0), q += x), x = p + b;\n            }\n\n            Z(n);\n            return q;\n          },\n          toWireType: function (n, k) {\n            'string' !== typeof k && W('Cannot pass non-string to C++ string type ' + c);\n            var l = g(k),\n                q = pb(4 + l + b);\n            J[q >> 2] = l >> h;\n            e(k, q + 4, l + b);\n            null !== n && n.push(Z, q);\n            return q;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Q,\n          K: function (n) {\n            Z(n);\n          }\n        });\n      },\n      p: function (a, b, c, d, e, g) {\n        P[a] = {\n          name: U(b),\n          W: Y(c, d),\n          X: Y(e, g),\n          N: []\n        };\n      },\n      b: function (a, b, c, d, e, g, m, h, n, k) {\n        P[a].N.push({\n          P: U(b),\n          U: c,\n          S: Y(d, e),\n          T: g,\n          Z: m,\n          Y: Y(h, n),\n          $: k\n        });\n      },\n      z: function (a, b) {\n        b = U(b);\n        T(a, {\n          aa: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function () {},\n          toWireType: function () {}\n        });\n      },\n      i: Ra,\n      A: function (a) {\n        if (0 === a) return Sa(fb());\n        var b = eb[a];\n        a = void 0 === b ? U(a) : b;\n        return Sa(fb()[a]);\n      },\n      n: function (a) {\n        4 < a && (X[a].M += 1);\n      },\n      q: function (a, b, c, d) {\n        a || W('Cannot use deleted val. handle = ' + a);\n        a = X[a].value;\n        var e = hb[b];\n\n        if (!e) {\n          e = '';\n\n          for (var g = 0; g < b; ++g) e += (0 !== g ? ', ' : '') + 'arg' + g;\n\n          var m = 'return function emval_allocator_' + b + '(constructor, argTypes, args) {\\n';\n\n          for (g = 0; g < b; ++g) m += 'var argType' + g + \" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + \" + g + '], \"parameter ' + g + '\");\\nvar arg' + g + ' = argType' + g + '.readValueFromPointer(args);\\nargs += argType' + g + \"['argPackAdvance'];\\n\";\n\n          e = new Function('requireRegisteredType', 'Module', '__emval_register', m + ('var obj = new constructor(' + e + ');\\nreturn __emval_register(obj);\\n}\\n'))(gb, f, Sa);\n          hb[b] = e;\n        }\n\n        return e(a, c, d);\n      },\n      h: function () {\n        A();\n      },\n      t: function (a, b, c) {\n        C.copyWithin(a, b, b + c);\n      },\n      e: function (a) {\n        a >>>= 0;\n        var b = C.length;\n        if (2147483648 < a) return !1;\n\n        for (var c = 1; 4 >= c; c *= 2) {\n          var d = b * (1 + 0.2 / c);\n          d = Math.min(d, a + 100663296);\n          d = Math.max(16777216, a, d);\n          0 < d % 65536 && (d += 65536 - d % 65536);\n\n          a: {\n            try {\n              B.grow(Math.min(2147483648, d) - H.byteLength + 65535 >>> 16);\n              ua(B.buffer);\n              var e = 1;\n              break a;\n            } catch (g) {}\n\n            e = void 0;\n          }\n\n          if (e) return !0;\n        }\n\n        return !1;\n      },\n      u: function (a, b) {\n        var c = 0;\n        jb().forEach(function (d, e) {\n          var g = b + c;\n          e = G[a + 4 * e >> 2] = g;\n\n          for (g = 0; g < d.length; ++g) I[e++ >> 0] = d.charCodeAt(g);\n\n          I[e >> 0] = 0;\n          c += d.length + 1;\n        });\n        return 0;\n      },\n      v: function (a, b) {\n        var c = jb();\n        G[a >> 2] = c.length;\n        var d = 0;\n        c.forEach(function (e) {\n          d += e.length + 1;\n        });\n        G[b >> 2] = d;\n        return 0;\n      },\n      m: function (a) {\n        if (!noExitRuntime) {\n          if (f.onExit) f.onExit(a);\n          ia = !0;\n        }\n\n        ea(a, new qb(a));\n      },\n      w: function () {\n        return 0;\n      },\n      r: function () {},\n      j: function (a, b, c, d) {\n        for (var e = 0, g = 0; g < c; g++) {\n          for (var m = G[b + 8 * g >> 2], h = G[b + (8 * g + 4) >> 2], n = 0; n < h; n++) {\n            var k = C[m + n],\n                l = lb[a];\n\n            if (0 === k || 10 === k) {\n              for (k = 0; l[k] && !(NaN <= k);) ++k;\n\n              k = ja.decode(l.subarray ? l.subarray(0, k) : new Uint8Array(l.slice(0, k)));\n              (1 === a ? ha : v)(k);\n              l.length = 0;\n            } else l.push(k);\n          }\n\n          e += h;\n        }\n\n        G[d >> 2] = e;\n        return 0;\n      },\n      a: B,\n      s: function () {}\n    };\n\n    (function () {\n      function a(e) {\n        f.asm = e.exports;\n        K = f.asm.C;\n        L--;\n        f.monitorRunDependencies && f.monitorRunDependencies(L);\n        0 == L && (null !== Ba && (clearInterval(Ba), Ba = null), M && (e = M, M = null, e()));\n      }\n\n      function b(e) {\n        a(e.instance);\n      }\n\n      function c(e) {\n        return Fa().then(function (g) {\n          return WebAssembly.instantiate(g, d);\n        }).then(e, function (g) {\n          v('failed to asynchronously prepare wasm: ' + g);\n          A(g);\n        });\n      }\n\n      var d = {\n        a: rb\n      };\n      L++;\n      f.monitorRunDependencies && f.monitorRunDependencies(L);\n      if (f.instantiateWasm) try {\n        return f.instantiateWasm(d, a);\n      } catch (e) {\n        return v('Module.instantiateWasm callback failed with error: ' + e), !1;\n      }\n      (function () {\n        return w || 'function' !== typeof WebAssembly.instantiateStreaming || Ca() || 'function' !== typeof fetch ? c(b) : fetch(N, {\n          credentials: 'same-origin'\n        }).then(function (e) {\n          return WebAssembly.instantiateStreaming(e, d).then(b, function (g) {\n            v('wasm streaming compile failed: ' + g);\n            v('falling back to ArrayBuffer instantiation');\n            return c(b);\n          });\n        });\n      })().catch(ba);\n      return {};\n    })();\n\n    var ob = f.___wasm_call_ctors = function () {\n      return (ob = f.___wasm_call_ctors = f.asm.D).apply(null, arguments);\n    },\n        Z = f._free = function () {\n      return (Z = f._free = f.asm.E).apply(null, arguments);\n    },\n        pb = f._malloc = function () {\n      return (pb = f._malloc = f.asm.F).apply(null, arguments);\n    },\n        bb = f.___getTypeName = function () {\n      return (bb = f.___getTypeName = f.asm.G).apply(null, arguments);\n    };\n\n    f.___embind_register_native_and_builtin_types = function () {\n      return (f.___embind_register_native_and_builtin_types = f.asm.H).apply(null, arguments);\n    };\n\n    f.dynCall_jiji = function () {\n      return (f.dynCall_jiji = f.asm.I).apply(null, arguments);\n    };\n\n    var sb;\n\n    function qb(a) {\n      this.name = 'ExitStatus';\n      this.message = 'Program terminated with exit(' + a + ')';\n      this.status = a;\n    }\n\n    M = function tb() {\n      sb || ub();\n      sb || (M = tb);\n    };\n\n    function ub() {\n      function a() {\n        if (!sb && (sb = !0, f.calledRun = !0, !ia)) {\n          O(xa);\n          O(ya);\n          aa(f);\n          if (f.onRuntimeInitialized) f.onRuntimeInitialized();\n          if (f.postRun) for ('function' == typeof f.postRun && (f.postRun = [f.postRun]); f.postRun.length;) {\n            var b = f.postRun.shift();\n            za.unshift(b);\n          }\n          O(za);\n        }\n      }\n\n      if (!(0 < L)) {\n        if (f.preRun) for ('function' == typeof f.preRun && (f.preRun = [f.preRun]); f.preRun.length;) Aa();\n        O(wa);\n        0 < L || (f.setStatus ? (f.setStatus('Running...'), setTimeout(function () {\n          setTimeout(function () {\n            f.setStatus('');\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    f.run = ub;\n    if (f.preInit) for ('function' == typeof f.preInit && (f.preInit = [f.preInit]); 0 < f.preInit.length;) f.preInit.pop()();\n    noExitRuntime = !0;\n    ub();\n    return Module.ready;\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Module);\n\n//# sourceURL=webpack://squooshCore/./codecs/mozjpeg_enc/mozjpeg_enc.js?");

/***/ }),

/***/ "./codecs/oxipng/pkg/squoosh_oxipng.js":
/*!*********************************************!*\
  !*** ./codecs/oxipng/pkg/squoosh_oxipng.js ***!
  \*********************************************/
/*! exports provided: optimise, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"optimise\", function() { return optimise; });\nlet wasm;\nlet cachedTextDecoder = new TextDecoder('utf-8', {\n  ignoreBOM: true,\n  fatal: true\n});\ncachedTextDecoder.decode();\nlet cachegetUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n  if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n    cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n  }\n\n  return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction passArray8ToWasm0(arg, malloc) {\n  const ptr = malloc(arg.length * 1);\n  getUint8Memory0().set(arg, ptr / 1);\n  WASM_VECTOR_LEN = arg.length;\n  return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n  if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n    cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n  }\n\n  return cachegetInt32Memory0;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n* @param {Uint8Array} data\n* @param {number} level\n* @returns {Uint8Array}\n*/\n\n\nfunction optimise(data, level) {\n  try {\n    const retptr = wasm.__wbindgen_export_0.value - 16;\n    wasm.__wbindgen_export_0.value = retptr;\n    var ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.optimise(retptr, ptr0, len0, level);\n    var r0 = getInt32Memory0()[retptr / 4 + 0];\n    var r1 = getInt32Memory0()[retptr / 4 + 1];\n    var v1 = getArrayU8FromWasm0(r0, r1).slice();\n\n    wasm.__wbindgen_free(r0, r1 * 1);\n\n    return v1;\n  } finally {\n    wasm.__wbindgen_export_0.value += 16;\n  }\n}\n\nasync function load(module, imports) {\n  if (typeof Response === 'function' && module instanceof Response) {\n    if (typeof WebAssembly.instantiateStreaming === 'function') {\n      try {\n        return await WebAssembly.instantiateStreaming(module, imports);\n      } catch (e) {\n        if (module.headers.get('Content-Type') != 'application/wasm') {\n          console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n        } else {\n          throw e;\n        }\n      }\n    }\n\n    const bytes = await module.arrayBuffer();\n    return await WebAssembly.instantiate(bytes, imports);\n  } else {\n    const instance = await WebAssembly.instantiate(module, imports);\n\n    if (instance instanceof WebAssembly.Instance) {\n      return {\n        instance,\n        module\n      };\n    } else {\n      return instance;\n    }\n  }\n}\n\nasync function init(input) {\n  // if (typeof input === 'undefined') {\n  //     input = import.meta.url.replace(/\\.js$/, '_bg.wasm');\n  // }\n  const imports = {};\n  imports.wbg = {};\n\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n  };\n\n  if (typeof input === 'string' || typeof Request === 'function' && input instanceof Request || typeof URL === 'function' && input instanceof URL) {\n    input = fetch(input);\n  }\n\n  const {\n    instance,\n    module\n  } = await load(await input, imports);\n  wasm = instance.exports;\n  init.__wbindgen_wasm_module = module;\n  return wasm;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (init);\n\n//# sourceURL=webpack://squooshCore/./codecs/oxipng/pkg/squoosh_oxipng.js?");

/***/ }),

/***/ "./encoders/mozJPEG.ts":
/*!*****************************!*\
  !*** ./encoders/mozJPEG.ts ***!
  \*****************************/
/*! exports provided: label, mimeType, extension, defaultOptions, encode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"label\", function() { return label; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mimeType\", function() { return mimeType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extension\", function() { return extension; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultOptions\", function() { return defaultOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encode\", function() { return encode; });\n/* harmony import */ var _codecs_mozjpeg_enc_mozjpeg_enc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../codecs/mozjpeg_enc/mozjpeg_enc */ \"./codecs/mozjpeg_enc/mozjpeg_enc.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./utils/index.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n// import wasmUrl from '../codecs/mozjpeg_enc/mozjpeg_enc.wasm';\n// @debug\nvar wasmUrl = './dist/mozjpeg_enc.wasm';\nvar label = 'MozJPEG';\nvar mimeType = 'image/jpeg';\nvar extension = 'jpg';\nvar defaultOptions = {\n    quality: 75,\n    baseline: false,\n    arithmetic: false,\n    progressive: true,\n    optimize_coding: true,\n    smoothing: 0,\n    color_space: 3 /* YCbCr */,\n    quant_table: 3,\n    trellis_multipass: false,\n    trellis_opt_zero: false,\n    trellis_opt_table: false,\n    trellis_loops: 1,\n    auto_subsample: true,\n    chroma_subsample: 2,\n    separate_chroma_quality: false,\n    chroma_quality: 75,\n};\nvar emscriptenModule;\nfunction encode(data, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var module, resultView;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!emscriptenModule) {\n                        emscriptenModule = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"initEmscriptenModule\"])(_codecs_mozjpeg_enc_mozjpeg_enc__WEBPACK_IMPORTED_MODULE_0__[\"default\"], wasmUrl);\n                    }\n                    options = options || defaultOptions;\n                    return [4 /*yield*/, emscriptenModule];\n                case 1:\n                    module = _a.sent();\n                    resultView = module.encode(data.data, data.width, data.height, options);\n                    // wasm can’t run on SharedArrayBuffers, so we hard-cast to ArrayBuffer.\n                    return [2 /*return*/, resultView.buffer];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://squooshCore/./encoders/mozJPEG.ts?");

/***/ }),

/***/ "./encoders/oxiPNG.ts":
/*!****************************!*\
  !*** ./encoders/oxiPNG.ts ***!
  \****************************/
/*! exports provided: label, mimeType, extension, defaultOptions, encode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"label\", function() { return label; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mimeType\", function() { return mimeType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extension\", function() { return extension; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultOptions\", function() { return defaultOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encode\", function() { return encode; });\n/* harmony import */ var _codecs_oxipng_pkg_squoosh_oxipng__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../codecs/oxipng/pkg/squoosh_oxipng */ \"./codecs/oxipng/pkg/squoosh_oxipng.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./utils/index.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n// import oxiWasmUrlST from 'url:codecs/oxipng/pkg/squoosh_oxipng_bg.wasm';\n// @debug\nvar wasmUrl = './dist/squoosh_oxipng_bg.wasm';\nvar label = 'OxiPNG';\nvar mimeType = 'image/png';\nvar extension = 'png';\nvar defaultOptions = {\n    level: 3,\n};\nfunction initST() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Object(_codecs_oxipng_pkg_squoosh_oxipng__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(wasmUrl)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/, _codecs_oxipng_pkg_squoosh_oxipng__WEBPACK_IMPORTED_MODULE_0__[\"optimise\"]];\n            }\n        });\n    });\n}\nvar wasmReady;\nfunction encode(imageData, options) {\n    if (options === void 0) { options = defaultOptions; }\n    return __awaiter(this, void 0, void 0, function () {\n        var pngBlob, pngBuffer, optimise;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"canvasEncode\"])(imageData, 'image/png')];\n                case 1:\n                    pngBlob = _a.sent();\n                    return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"blobToArrayBuffer\"])(pngBlob)];\n                case 2:\n                    pngBuffer = _a.sent();\n                    if (!wasmReady) {\n                        wasmReady = initST();\n                    }\n                    return [4 /*yield*/, wasmReady];\n                case 3:\n                    optimise = _a.sent();\n                    return [2 /*return*/, optimise(new Uint8Array(pngBuffer), options.level).buffer];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://squooshCore/./encoders/oxiPNG.ts?");

/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! exports provided: compress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compress\", function() { return compress; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./utils/index.ts\");\n/* harmony import */ var _lib_encoder_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/encoder-map */ \"./lib/encoder-map.ts\");\n/* harmony import */ var _lib_quantize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/quantize */ \"./lib/quantize.ts\");\n/**\n * squoosh app core code related to image compression\n */\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n/**\n * 根据图片的mime类型选择对应的编码库\n * @param {string} mimeType 图片的mime类型\n */\nfunction getEncoderKey(mimeType) {\n    switch (mimeType) {\n        case 'image/png':\n            return 'oxiPNG';\n        case 'image/jpeg':\n            return 'mozJPEG';\n        default:\n            return '';\n    }\n}\n/**\n *\n * @param file\n */\nfunction compress(file, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var mimeType, imageData, quantized, encoderKey, encoder, compressedData;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"sniffMimeType\"])(file)];\n                case 1:\n                    mimeType = _a.sent();\n                    return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"builtinDecode\"])(file)];\n                case 2:\n                    imageData = _a.sent();\n                    return [4 /*yield*/, Object(_lib_quantize__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(imageData)];\n                case 3:\n                    quantized = _a.sent();\n                    encoderKey = getEncoderKey(mimeType);\n                    encoder = _lib_encoder_map__WEBPACK_IMPORTED_MODULE_1__[\"default\"][encoderKey];\n                    if (!encoder) return [3 /*break*/, 5];\n                    return [4 /*yield*/, encoder.encode(quantized)];\n                case 4:\n                    compressedData = _a.sent();\n                    return [2 /*return*/, new File([compressedData], file.name.replace(/.[^.]*$/, \".\" + encoder.extension), { type: encoder.mimeType })];\n                case 5:\n                    console.error('lack of corresponding encoder!');\n                    _a.label = 6;\n                case 6: return [2 /*return*/];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://squooshCore/./index.ts?");

/***/ }),

/***/ "./lib/encoder-map.ts":
/*!****************************!*\
  !*** ./lib/encoder-map.ts ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _encoders_mozJPEG__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../encoders/mozJPEG */ \"./encoders/mozJPEG.ts\");\n/* harmony import */ var _encoders_oxiPNG__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../encoders/oxiPNG */ \"./encoders/oxiPNG.ts\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    mozJPEG: _encoders_mozJPEG__WEBPACK_IMPORTED_MODULE_0__,\n    oxiPNG: _encoders_oxiPNG__WEBPACK_IMPORTED_MODULE_1__\n});\n\n\n//# sourceURL=webpack://squooshCore/./lib/encoder-map.ts?");

/***/ }),

/***/ "./lib/quantize.ts":
/*!*************************!*\
  !*** ./lib/quantize.ts ***!
  \*************************/
/*! exports provided: defaultOptions, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"defaultOptions\", function() { return defaultOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return process; });\n/* harmony import */ var _codecs_imagequant_imagequant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../codecs/imagequant/imagequant */ \"./codecs/imagequant/imagequant.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./utils/index.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n// import wasmUrl from 'url:codecs/imagequant/imagequant.wasm';\n// @debug\nvar wasmUrl = './dist/imagequant.wasm';\nvar emscriptenModule;\nvar defaultOptions = {\n    zx: 0,\n    maxNumColors: 256,\n    dither: 1.0,\n};\nfunction process(data, opts) {\n    if (opts === void 0) { opts = defaultOptions; }\n    return __awaiter(this, void 0, void 0, function () {\n        var module, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!emscriptenModule) {\n                        emscriptenModule = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"initEmscriptenModule\"])(_codecs_imagequant_imagequant__WEBPACK_IMPORTED_MODULE_0__[\"default\"], wasmUrl);\n                    }\n                    return [4 /*yield*/, emscriptenModule];\n                case 1:\n                    module = _a.sent();\n                    result = opts.zx\n                        ? module.zx_quantize(data.data, data.width, data.height, opts.dither)\n                        : module.quantize(data.data, data.width, data.height, opts.maxNumColors, opts.dither);\n                    return [2 /*return*/, new ImageData(result, data.width, data.height)];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://squooshCore/./lib/quantize.ts?");

/***/ }),

/***/ "./utils/index.ts":
/*!************************!*\
  !*** ./utils/index.ts ***!
  \************************/
/*! exports provided: initEmscriptenModule, drawDataToCanvas, canvasEncode, canDecodeImageType, blobToArrayBuffer, blobToText, sniffMimeType, blobToImg, drawableToImageData, builtinDecode, builtinResize, canvasEncodeTest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initEmscriptenModule\", function() { return initEmscriptenModule; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawDataToCanvas\", function() { return drawDataToCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvasEncode\", function() { return canvasEncode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canDecodeImageType\", function() { return canDecodeImageType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blobToArrayBuffer\", function() { return blobToArrayBuffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blobToText\", function() { return blobToText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sniffMimeType\", function() { return sniffMimeType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blobToImg\", function() { return blobToImg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawableToImageData\", function() { return drawableToImageData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"builtinDecode\", function() { return builtinDecode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"builtinResize\", function() { return builtinResize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvasEncodeTest\", function() { return canvasEncodeTest; });\n/**\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n/// <reference path=\"../emscripten-types.d.ts\" />\nfunction initEmscriptenModule(moduleFactory, wasmUrl) {\n    return moduleFactory({\n        // Just to be safe, don't automatically invoke any wasm functions\n        noInitialRun: true,\n        locateFile: function (url) {\n            if (url.endsWith('.wasm'))\n                return wasmUrl;\n            throw Error('Unknown url in locateFile ' + url);\n        },\n    });\n}\n/** Replace the contents of a canvas with the given data */\nfunction drawDataToCanvas(canvas, data) {\n    var ctx = canvas.getContext('2d');\n    if (!ctx)\n        throw Error('Canvas not initialized');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.putImageData(data, 0, 0);\n}\n/**\n * Encode some image data in a given format using the browser's encoders\n *\n * @param {ImageData} data\n * @param {string} type A mime type, eg image/jpeg.\n * @param {number} [quality] Between 0-1.\n */\nfunction canvasEncode(data, type, quality) {\n    return __awaiter(this, void 0, void 0, function () {\n        var canvas, ctx, blob, dataUrl, result, outputType, binaryStr, data_1, i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    canvas = document.createElement('canvas');\n                    canvas.width = data.width;\n                    canvas.height = data.height;\n                    ctx = canvas.getContext('2d');\n                    if (!ctx)\n                        throw Error('Canvas not initialized');\n                    ctx.putImageData(data, 0, 0);\n                    if (!('toBlob' in canvas)) return [3 /*break*/, 2];\n                    return [4 /*yield*/, new Promise(function (r) {\n                            return canvas.toBlob(r, type, quality);\n                        })];\n                case 1:\n                    blob = _a.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    dataUrl = canvas.toDataURL(type, quality);\n                    result = /data:([^;]+);base64,(.*)$/.exec(dataUrl);\n                    if (!result)\n                        throw Error('Data URL reading failed');\n                    outputType = result[1];\n                    binaryStr = atob(result[2]);\n                    data_1 = new Uint8Array(binaryStr.length);\n                    for (i = 0; i < data_1.length; i += 1) {\n                        data_1[i] = binaryStr.charCodeAt(i);\n                    }\n                    blob = new Blob([data_1], { type: outputType });\n                    _a.label = 3;\n                case 3:\n                    if (!blob)\n                        throw Error('Encoding failed');\n                    return [2 /*return*/, blob];\n            }\n        });\n    });\n}\nfunction decodeImage(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var img, loaded;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    img = new Image();\n                    img.decoding = 'async';\n                    img.src = url;\n                    loaded = new Promise(function (resolve, reject) {\n                        img.onload = function () { return resolve(img); };\n                        img.onerror = function () { return reject(Error('Image loading error')); };\n                    });\n                    if (!img.decode) return [3 /*break*/, 2];\n                    // Nice off-thread way supported in Safari/Chrome.\n                    // Safari throws on decode if the source is SVG.\n                    // https://bugs.webkit.org/show_bug.cgi?id=188347\n                    return [4 /*yield*/, img.decode().catch(function () { return null; })];\n                case 1:\n                    // Nice off-thread way supported in Safari/Chrome.\n                    // Safari throws on decode if the source is SVG.\n                    // https://bugs.webkit.org/show_bug.cgi?id=188347\n                    _a.sent();\n                    _a.label = 2;\n                case 2: \n                // Always await loaded, as we may have bailed due to the Safari bug above.\n                return [4 /*yield*/, loaded];\n                case 3:\n                    // Always await loaded, as we may have bailed due to the Safari bug above.\n                    _a.sent();\n                    return [2 /*return*/, img];\n            }\n        });\n    });\n}\n/** Caches results from canDecodeImageType */\nvar canDecodeCache = new Map();\n/**\n * Tests whether the browser supports a particular image mime type.\n *\n * @param type Mimetype\n * @example await canDecodeImageType('image/avif')\n */\nfunction canDecodeImageType(type) {\n    var _this = this;\n    if (!canDecodeCache.has(type)) {\n        var resultPromise = (function () { return __awaiter(_this, void 0, void 0, function () {\n            var picture, img, source;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        picture = document.createElement('picture');\n                        img = document.createElement('img');\n                        source = document.createElement('source');\n                        source.srcset = 'data:,x';\n                        source.type = type;\n                        picture.append(source, img);\n                        // Wait a single microtick just for the `img.currentSrc` to get populated.\n                        return [4 /*yield*/, 0];\n                    case 1:\n                        // Wait a single microtick just for the `img.currentSrc` to get populated.\n                        _a.sent();\n                        // At this point `img.currentSrc` will contain \"data:,x\" if format is supported and \"\"\n                        // otherwise.\n                        return [2 /*return*/, !!img.currentSrc];\n                }\n            });\n        }); })();\n        canDecodeCache.set(type, resultPromise);\n    }\n    return canDecodeCache.get(type);\n}\nfunction blobToArrayBuffer(blob) {\n    return new Response(blob).arrayBuffer();\n}\nfunction blobToText(blob) {\n    return new Response(blob).text();\n}\nvar magicNumberToMimeType = new Map([\n    [/^%PDF-/, 'application/pdf'],\n    [/^GIF87a/, 'image/gif'],\n    [/^GIF89a/, 'image/gif'],\n    [/^\\x89PNG\\x0D\\x0A\\x1A\\x0A/, 'image/png'],\n    [/^\\xFF\\xD8\\xFF/, 'image/jpeg'],\n    [/^BM/, 'image/bmp'],\n    [/^I I/, 'image/tiff'],\n    [/^II*/, 'image/tiff'],\n    [/^MM\\x00*/, 'image/tiff'],\n    [/^RIFF....WEBPVP8[LX ]/, 'image/webp'],\n    [/^\\xF4\\xFF\\x6F/, 'image/webp2'],\n    [/^\\x00\\x00\\x00 ftypavif\\x00\\x00\\x00\\x00/, 'image/avif'],\n    [/^\\xff\\x0a/, 'image/jpegxl'],\n]);\nfunction sniffMimeType(blob) {\n    return __awaiter(this, void 0, void 0, function () {\n        var firstChunk, firstChunkString, magicNumberToMimeType_1, magicNumberToMimeType_1_1, _a, detector, mimeType;\n        var e_1, _b;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0: return [4 /*yield*/, blobToArrayBuffer(blob.slice(0, 16))];\n                case 1:\n                    firstChunk = _c.sent();\n                    firstChunkString = Array.from(new Uint8Array(firstChunk))\n                        .map(function (v) { return String.fromCodePoint(v); })\n                        .join('');\n                    try {\n                        for (magicNumberToMimeType_1 = __values(magicNumberToMimeType), magicNumberToMimeType_1_1 = magicNumberToMimeType_1.next(); !magicNumberToMimeType_1_1.done; magicNumberToMimeType_1_1 = magicNumberToMimeType_1.next()) {\n                            _a = __read(magicNumberToMimeType_1_1.value, 2), detector = _a[0], mimeType = _a[1];\n                            if (detector.test(firstChunkString)) {\n                                return [2 /*return*/, mimeType];\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (magicNumberToMimeType_1_1 && !magicNumberToMimeType_1_1.done && (_b = magicNumberToMimeType_1.return)) _b.call(magicNumberToMimeType_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    return [2 /*return*/, ''];\n            }\n        });\n    });\n}\nfunction blobToImg(blob) {\n    return __awaiter(this, void 0, void 0, function () {\n        var url;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    url = URL.createObjectURL(blob);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, , 3, 4]);\n                    return [4 /*yield*/, decodeImage(url)];\n                case 2: return [2 /*return*/, _a.sent()];\n                case 3:\n                    URL.revokeObjectURL(url);\n                    return [7 /*endfinally*/];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction drawableToImageData(drawable, opts) {\n    if (opts === void 0) { opts = {}; }\n    var _a = opts.width, width = _a === void 0 ? drawable.width : _a, _b = opts.height, height = _b === void 0 ? drawable.height : _b, _c = opts.sx, sx = _c === void 0 ? 0 : _c, _d = opts.sy, sy = _d === void 0 ? 0 : _d, _e = opts.sw, sw = _e === void 0 ? drawable.width : _e, _f = opts.sh, sh = _f === void 0 ? drawable.height : _f;\n    // Make canvas same size as image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    // Draw image onto canvas\n    var ctx = canvas.getContext('2d');\n    if (!ctx)\n        throw new Error('Could not create canvas context');\n    ctx.drawImage(drawable, sx, sy, sw, sh, 0, 0, width, height);\n    return ctx.getImageData(0, 0, width, height);\n}\nfunction builtinDecode(blob) {\n    return __awaiter(this, void 0, void 0, function () {\n        var drawable, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!('createImageBitmap' in self)) return [3 /*break*/, 2];\n                    return [4 /*yield*/, createImageBitmap(blob)];\n                case 1:\n                    _a = _b.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, blobToImg(blob)];\n                case 3:\n                    _a = _b.sent();\n                    _b.label = 4;\n                case 4:\n                    drawable = _a;\n                    return [2 /*return*/, drawableToImageData(drawable)];\n            }\n        });\n    });\n}\nfunction builtinResize(data, sx, sy, sw, sh, dw, dh, method) {\n    var canvasSource = document.createElement('canvas');\n    canvasSource.width = data.width;\n    canvasSource.height = data.height;\n    drawDataToCanvas(canvasSource, data);\n    var canvasDest = document.createElement('canvas');\n    canvasDest.width = dw;\n    canvasDest.height = dh;\n    var ctx = canvasDest.getContext('2d');\n    if (!ctx)\n        throw new Error('Could not create canvas context');\n    if (method === 'pixelated') {\n        ctx.imageSmoothingEnabled = false;\n    }\n    else {\n        ctx.imageSmoothingQuality = method;\n    }\n    ctx.drawImage(canvasSource, sx, sy, sw, sh, 0, 0, dw, dh);\n    return ctx.getImageData(0, 0, dw, dh);\n}\n/**\n * Test whether <canvas> can encode to a particular type.\n */\nfunction canvasEncodeTest(mimeType) {\n    return __awaiter(this, void 0, void 0, function () {\n        var blob, err_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, canvasEncode(new ImageData(1, 1), mimeType)];\n                case 1:\n                    blob = _a.sent();\n                    // According to the spec, the blob should be null if the format isn't supported…\n                    if (!blob)\n                        return [2 /*return*/, false];\n                    // …but Safari & Firefox fall back to PNG, so we need to check the mime type.\n                    return [2 /*return*/, blob.type === mimeType];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, false];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://squooshCore/./utils/index.ts?");

/***/ })

/******/ });
});